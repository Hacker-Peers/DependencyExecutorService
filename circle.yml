machine:
  java:
    version: oraclejdk8
dependencies:
  override:
     - chmod +x gradlew
test:
  post:
    - mkdir -p $CIRCLE_TEST_REPORTS/junit/
    - mkdir -p $CIRCLE_TEST_REPORTS/junit-html/
    - mkdir -p $CIRCLE_ARTIFACTS/libs/
    - if [ -e ./gradlew ]; then ./gradlew build jacocoTestReport coveralls;else gradle build jacocoTestReport coveralls;fi
#    - find . # Listing all folder structure
    - find . -type f -regex ".*/build/test-results/test/.*xml" -exec cp {} $CIRCLE_TEST_REPORTS/junit/ \;
    - cp -r ./build/reports/tests $CIRCLE_TEST_REPORTS/junit-html/
    - find ./build/libs -type f -name '*.jar' -exec cp {} $CIRCLE_ARTIFACTS/libs \;
